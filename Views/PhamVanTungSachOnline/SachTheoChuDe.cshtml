@using PhamVanTung.SachOnline.Models
@using PagedList.Mvc
@model PagedList.PagedList<SACH>

@{
    ViewBag.Title = "Sách theo Chủ đề";
    Layout = "~/Views/Shared/PhamVanTung.Layout.cshtml";
}

<h2 class="text-center">SÁCH THEO CHỦ ĐỀ</h2>
<hr />

<div class="row text-center">
    @if (Model != null && Model.Any())
    {
        foreach (var sach in Model)
        {
            <div class="col-sm-4 col-md-4 col-lg-4 col-xs-6">
                <div class="thumbnail">
                    <a href="@Url.Action("ChiTietSach", "PhamVanTungSachOnline", new { id = sach.MaSach })">
                        <img src="@Url.Content("~/Images/" + (sach.AnhBia ?? "no-image.png"))"
                             alt="@sach.TenSach"
                             class="img-responsive img-rounded imgbook" />
                    </a>
                    <div class="caption">
                        <h3>
                            <a href="@Url.Action("ChiTietSach", "PhamVanTungSachOnline", new { id = sach.MaSach })">
                                @sach.TenSach
                            </a>
                        </h3>

                        @if (sach.GiaBan.HasValue)
                        {
                            <p><strong>@string.Format("{0:0,0} đ", sach.GiaBan)</strong></p>
                        }
                        else
                        {
                            <p class="text-muted">Mô tả tóm tắt sản phẩm</p>
                        }

                        <p>
                            <a href="@Url.Action("ThemGioHang", "PhamVanTung_GioHang",
                                   new { iMaSach = sach.MaSach, strURL = Request.Url.ToString() })"
                               class="btn btn-warning">
                                <span class="glyphicon glyphicon-shopping-cart"></span> Add to Cart
                            </a>
                        </p>
                    </div>
                </div>
            </div>
        }
    }
    else
    {
        <div class="col-xs-12">
            <div class="alert alert-info text-center">Không có sách thuộc chủ đề này.</div>
        </div>
    }
</div>

@if (Model != null && Model.PageCount > 1)
{
    <div class="text-center" style="margin-top:10px;">
        Trang @(Model.PageNumber)/@Model.PageCount
    </div>

    <div class="text-center">
        @Html.PagedListPager(
            Model,
            page => Url.Action(
                "SachTheoChuDe",
                "PhamVanTungSachOnline",
                new { id = ViewBag.ChuDeId, page = page } // NHỚ KÈM id
            ),
            new PagedListRenderOptions
                {
                DisplayLinkToFirstPage = PagedListDisplayMode.Always,
                DisplayLinkToLastPage = PagedListDisplayMode.Always,
                DisplayLinkToPreviousPage = PagedListDisplayMode.Always,
                DisplayLinkToNextPage = PagedListDisplayMode.Always,
                MaximumPageNumbersToDisplay = 5,
                UlElementClasses = new[] { "pagination" }
            })
    </div>

}

<style>
    .MenuTrang {
        display: inline-block;
        margin: 10px auto;
    }

    .pagination {
        display: inline-block;
        margin: 15px auto;
    }

        .pagination li > a,
        .pagination li > span {
            display: block;
            padding: 6px 12px;
            border: 1px solid #ddd;
            text-decoration: none;
            background: #fff;
            color: #337ab7;
        }

        .pagination li.active > span,
        .pagination li.active > a {
            background: #337ab7;
            color: #fff;
            border-color: #2e6da4;
        }

        .pagination li > a:hover {
            background: #eee;
        }
</style>
